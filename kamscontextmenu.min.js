function contextMenu(e,t){var n=this;e.addEventListener("contextmenu",function(e){e=e||window.event,e.which||void 0===e.button||(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0);var i=e.which;if(3==i){try{var d=document.getElementById("kamscontextmenu");d.parentNode.removeChild(d)}catch(e){}var d=document.createElement("div");d.setAttribute("id","kamscontextmenu"),document.getElementsByTagName("body")[0].appendChild(d);var u=window.scrollX,a=window.scrollY;d.style.left=e.clientX+u+"px",d.style.top=e.clientY+a+"px",n.buildMenu(d,t),e.preventDefault(),document.addEventListener("click",function(){n.hideMenu()})}},!0),this.hideMenu=function(){try{var e=document.getElementById("kamscontextmenu");e.style.display="none"}catch(t){}},this.showSubmenu=function(e){e.addEventListener("mouseover",function(){this.setAttribute("data-show","true");var e=parseInt(this.getBoundingClientRect().width),t=parseInt(this.getBoundingClientRect().height),n=this.getElementsByTagName("ul")[0];n.style.marginLeft=e-4+"px",n.style.marginTop=-t-1+"px"}),e.addEventListener("mouseout",function(){this.setAttribute("data-show","false")})},this.buildMenu=function(e,t){var i=document.createElement("ul");if(e.appendChild(i),"undefined"!=typeof t.title){var d=document.createElement("li"),u=document.createElement("span");u.setAttribute("class","menu-title"),u.innerHTML=t.title,d.appendChild(u),i.appendChild(d)}var a,r;for(a in t.item){r=t.item[a];var d=document.createElement("li"),c=document.createElement("a");if(c.innerHTML=r.text,d.appendChild(c),"undefined"!=typeof r.href?c.setAttribute("href",r.href):c.setAttribute("href","#"),"undefined"!=typeof r.target&&c.setAttribute("target",r.target),"undefined"!=typeof r["class"]&&c.setAttribute("class",r["class"]),"undefined"!=typeof r.icon&&(c.style.backgroundImage="url('"+r.icon+"')"),"undefined"!=typeof r.onclick&&c.addEventListener("click",r.onclick),i.appendChild(d),"undefined"!=typeof r.children){d.setAttribute("data-has-child","true");var u=document.createElement("span");u.setAttribute("class","has-child"),u.innerHTML="&nbsp;",c.insertBefore(u,c.firstChild),n.buildMenu(d,r.children),n.showSubmenu(d)}}}}